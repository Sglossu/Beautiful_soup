from bs4 import BeautifulSoup

def main():
    # 1
    with open("evilcorp.html", "r") as file:
        soup = BeautifulSoup(file, "lxml")

    # 2
    title = soup.title
    title.string = "Evil Corp - Stealing your money every day"

    # 3
    NEW_WELCOME = ", you are hacked!"

    old_welcome = soup.find("span", class_="name")
    if old_welcome:
        beauty_name = ' '.join(old_welcome.strings)
        youre_hacked = soup.new_tag("h1")
        youre_hacked.string = beauty_name + NEW_WELCOME
        old_welcome.insert_after(youre_hacked)
    else:
        youre_hacked = soup.new_tag("h1")
        youre_hacked.string = "You are hacked"
        soup.body.insert(0, youre_hacked)

    # 4
    js_script = """
        hacked = function() {
                alert('hacked');
            }
            window.addEventListener('load', 
              function() { 
                var f = document.querySelector("form");
                f.setAttribute("onsubmit", "hacked()");
              },
              false
            );
        """
    trenton_sc = soup.new_tag("script")
    trenton_sc.string = js_script
    soup.body.append(trenton_sc)

    # 5
    soup.a.string = "Fsociety"
    url = "https://mrrobot.fandom.com/wiki/Fsociety"
    soup.a['href'] = url

    # 6
    with open("evilcorp_hacked1.html", "w") as out_file:
        out_file.write(soup.prettify())

if __name__ == '__main__':
    main()